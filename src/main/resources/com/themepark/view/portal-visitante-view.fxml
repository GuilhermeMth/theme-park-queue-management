<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.themepark.controller.PortalVisitanteController"
            prefHeight="700.0" prefWidth="1000.0">

    <!-- Topo: Busca de Visitante -->
    <top>
        <VBox>
            <HBox alignment="CENTER" style="-fx-background-color: #9C27B0; -fx-padding: 15;">
                <Label text="PORTAL DO VISITANTE" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="20.0"/>
                    </font>
                </Label>
            </HBox>

            <!-- Busca -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 15; -fx-background-color: #F5F5F5;">
                <Label text="CPF do Visitante:" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtBuscaCpf" promptText="000.000.000-00" prefWidth="200"/>
                <Button fx:id="btnBuscarVisitante" text="ðŸ” Buscar" onAction="#buscarVisitante"
                        style="-fx-background-color: #9C27B0; -fx-text-fill: white; -fx-font-weight: bold;"/>
            </HBox>

            <!-- InformaÃ§Ãµes do Visitante -->
            <GridPane hgap="15" vgap="10" style="-fx-padding: 15; -fx-background-color: #EEEEEE;">
                <columnConstraints>
                    <ColumnConstraints percentWidth="25"/>
                    <ColumnConstraints percentWidth="25"/>
                    <ColumnConstraints percentWidth="25"/>
                    <ColumnConstraints percentWidth="25"/>
                </columnConstraints>

                <VBox spacing="3" GridPane.columnIndex="0">
                    <Label text="Nome:" style="-fx-font-size: 10; -fx-text-fill: gray;"/>
                    <Label fx:id="lblNomeVisitante" text="-" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                </VBox>

                <VBox spacing="3" GridPane.columnIndex="1">
                    <Label text="CPF:" style="-fx-font-size: 10; -fx-text-fill: gray;"/>
                    <Label fx:id="lblCpfVisitante" text="-" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                </VBox>

                <VBox spacing="3" GridPane.columnIndex="2">
                    <Label text="Idade:" style="-fx-font-size: 10; -fx-text-fill: gray;"/>
                    <Label fx:id="lblIdadeVisitante" text="-" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                </VBox>

                <VBox spacing="3" GridPane.columnIndex="3">
                    <Label text="Tipo de Ingresso:" style="-fx-font-size: 10; -fx-text-fill: gray;"/>
                    <Label fx:id="lblTipoIngresso" text="-" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
                </VBox>
            </GridPane>
        </VBox>
    </top>

    <!-- Centro: Abas -->
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE" style="-fx-padding: 10;">

            <!-- Aba: AtraÃ§Ãµes DisponÃ­veis -->
            <Tab text="AtraÃ§Ãµes DisponÃ­veis">
                <VBox spacing="10" style="-fx-padding: 10;">

                    <Label text="AtraÃ§Ãµes que vocÃª pode acessar:" style="-fx-font-size: 14; -fx-font-weight: bold;"/>

                    <TableView fx:id="tabelaAtracoesDisponiveis" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colNomeAtracao" text="Nome" prefWidth="200"/>
                            <TableColumn fx:id="colTipoAtracao" text="Tipo" prefWidth="150"/>
                            <TableColumn fx:id="colCapacidade" text="Capacidade" prefWidth="100"/>
                            <TableColumn fx:id="colIdadeMin" text="Idade MÃ­n." prefWidth="100"/>
                            <TableColumn fx:id="colPrioridade" text="Prioridade" prefWidth="120"/>
                        </columns>
                    </TableView>

                    <HBox spacing="10" alignment="CENTER">
                        <Button fx:id="btnEntrarFila" text="âž• Entrar na Fila" onAction="#entrarNaFila"
                                style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 10 20;"/>
                        <Label text="Selecione uma atraÃ§Ã£o e clique para entrar na fila virtual"/>
                    </HBox>
                </VBox>
            </Tab>

            <!-- Aba: Minhas Filas -->
            <Tab text="Minhas Filas">
                <VBox spacing="10" style="-fx-padding: 10;">

                    <Label text="AtraÃ§Ãµes em que vocÃª estÃ¡ aguardando:" style="-fx-font-size: 14; -fx-font-weight: bold;"/>

                    <ListView fx:id="listaMinhasFilas" prefHeight="200" VBox.vgrow="NEVER"/>

                    <HBox spacing="10" alignment="CENTER">
                        <Button fx:id="btnConsultarPosicao" text="Ver Detalhes" onAction="#consultarPosicao"
                                style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-weight: bold;"/>
                        <Button fx:id="btnSairFila" text="Sair da Fila" onAction="#sairDaFila"
                                style="-fx-background-color: #F44336; -fx-text-fill: white; -fx-font-weight: bold;"/>
                    </HBox>

                    <Separator/>

                    <Label text="Detalhes da Fila Selecionada:" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                    <TextArea fx:id="txtDetalhesEspera" editable="false" prefHeight="200" VBox.vgrow="ALWAYS"
                              style="-fx-font-family: 'Courier New'; -fx-font-size: 12;"/>
                </VBox>
            </Tab>

            <!-- Aba: HistÃ³rico -->
            <Tab text="ðŸ“œ HistÃ³rico">
                <VBox spacing="10" style="-fx-padding: 10;">

                    <Label text="Todas as suas reservas:" style="-fx-font-size: 14; -fx-font-weight: bold;"/>

                    <TableView fx:id="tabelaHistorico" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn fx:id="colAtracaoReserva" text="AtraÃ§Ã£o" prefWidth="300"/>
                            <TableColumn fx:id="colDataReserva" text="Data/Hora" prefWidth="150"/>
                            <TableColumn fx:id="colStatusReserva" text="Status" prefWidth="200"/>
                        </columns>
                    </TableView>

                    <Label text="Legenda: ATIVA = Aguardando | CONCLUIDA = JÃ¡ aproveitou | CANCELADA = Saiu da fila"
                           style="-fx-font-size: 11; -fx-text-fill: gray;"/>
                </VBox>
            </Tab>

        </TabPane>
    </center>

    <!-- RodapÃ© -->
    <bottom>
        <HBox alignment="CENTER" spacing="15" style="-fx-background-color: #F5F5F5; -fx-padding: 10;">
            <Button fx:id="btnAtualizarDados" text="Atualizar Dados" onAction="#atualizarDados"/>
            <Label text="|"/>
            <Label text="Portal do Visitante - Gerencie suas reservas de atraÃ§Ãµes" style="-fx-text-fill: gray;"/>
        </HBox>
    </bottom>

</BorderPane>